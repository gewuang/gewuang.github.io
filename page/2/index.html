<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







  

<link href="https://cdnjs.cat.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="当你觉得晚的时候，恰恰是最早的时候">
<meta property="og:type" content="website">
<meta property="og:title" content="Ramon&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Ramon&#39;s Blog">
<meta property="og:description" content="当你觉得晚的时候，恰恰是最早的时候">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ramon&#39;s Blog">
<meta name="twitter:description" content="当你觉得晚的时候，恰恰是最早的时候">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>Ramon's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ramon's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录平时工作学习中的知识</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/node_introduce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/22/node_introduce/" itemprop="url">Node底层原理简介</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-22T10:10:05+08:00">
                2019-08-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-01-10T14:09:36+08:00">
                2020-01-10
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Node-js/" itemprop="url" rel="index">
                    <span itemprop="name">Node.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.5k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>JavaScript我们都知道，作为前端必备的知识为大家所熟知，那Node.js大家又了解多少呢？</p>
<p>首先来看下<a href="https://Nodejs.org/en/" target="_blank" rel="noopener">Node.js官网</a>对他的介绍</p>
<blockquote>
<p>Node.js® is a JavaScript runtime built on Chrome’s V8 JavaScript engine.</p>
</blockquote>
<p>直译过来就是Node.js是构建在谷歌的V8 JS引擎上运行的JavaScript。</p>
<p>看完并不能理解Node.js是什么，首先抛出几个问题</p>
<ol>
<li>V8引擎是什么?</li>
<li>Node.js是什么?</li>
<li>Node.js跟javascript有什么区别<br>下面来一一解释。</li>
</ol>
<h1 id="V8引擎是什么"><a href="#V8引擎是什么" class="headerlink" title="V8引擎是什么"></a>V8引擎是什么</h1><ul>
<li>是什么：随着chrome发布的<strong>JavaScript渲染引擎</strong>。</li>
<li>做什么：对JavaScript代码进行解释执行。</li>
<li>优势：更快。原因如下：<br><br>相比于其他JS引擎转换为字节码或者解释执行相比，V8引擎直接将代码编译成原生机器码（IA-32、X86-64、ARM、MIPS CPUs），并且使用了如内联缓存（inline cache）等技术来提高性能。同时，V8可以独立运行或者嵌入到C++应用程序中运行（本身是由C++实现的）。</li>
</ul>
<p>如果需要对V8引擎有更详细的了解可以查看此文章： <a href="http://blog.csdn.net/xiangzhihong8/article/details/74996757" target="_blank" rel="noopener">Google V8引擎</a>，这里就不详细解释了。</p>
<h1 id="Nodejs是什么"><a href="#Nodejs是什么" class="headerlink" title="Nodejs是什么"></a>Nodejs是什么</h1><p>介绍完了V8引擎，Node.js是什么呢？</p>
<blockquote>
<p>Node.js就是运行在服务端的javaScript。</p>
</blockquote>
<p><strong>原因：</strong>Node.js在V8引擎的基础上进行封装扩展，使用c/c++等语言开发了大量的服务器端操作（如文件操作、网络通信、操作系统API等），用于方便搭建快速响应、易于拓展的网络应用。</p>
<h2 id="基础架构"><a href="#基础架构" class="headerlink" title="基础架构"></a>基础架构</h2><p>了解Node.js的原理就要从整个架构图开始，如下为Node.js的基础架构图。</p>
<p><img src="http://git.cn-hangzhou.oss.aliyun-inc.com/uploads/beidou/beidou/053df3b1fa045a3d5f6218095d108dff/image.png" alt="Node基础架构图"></p>
<p>上面这个图为简单概括了下Node.js的架构，主要分为三层，下面来一一介绍：</p>
<ul>
<li>Node.js/APP：这部分是所有的js代码，包括Node.js的核心代码，npm install装载的模块以及你的code等。</li>
<li>桥接层：这一层的功能是用来将底层c/c++的代码接口提供给上层js代码使用（胶水代码）。主要有两个模块，Node.js Bindings、c/c++ Addons。其中Binding是用来桥接Node.js核心库的依赖（如zlib、OpenSSL、c-ares、http-parser 等），而Addons则是用来桥接我们自己实现的代码或者第三方库的模块。</li>
<li>Node.js的依赖库：这部分为核心依赖底层库，主要包括V8、libuv以及其他底层依赖库，我们下面来详解这些模块。</li>
</ul>
<p>底层依赖库介绍如下：<br>    <strong>V8</strong>前面已经说过了，高性能的JavaScript引擎，这里就不赘述了。<br>    <strong>libuv</strong>：C语言开发，主要提供事件循环（event loop）、异步网络I/O、文件系统I/O等能力。<br>    <strong>other</strong>：其他底层依赖库主要提供了对系统底层功能的访问，如<a href="https://c-ares.haxx.se/" target="_blank" rel="noopener">c-ares</a>提供DNS解析能力。<a href="https://www.openssl.org/" target="_blank" rel="noopener">crypto(OpenSSL)</a>提供加密能力，http提供网络服务，<a href="http://zlib.net/" target="_blank" rel="noopener">zlib</a>提供解压能力等等。</p>
<p>介绍完这些，我们好像并不能理解Node.js那些特性如单线程、异步IO，事件驱动等，下面我们通过运行原理的介绍带大家去理解这些内容。</p>
<h2 id="运行原理"><a href="#运行原理" class="headerlink" title="运行原理"></a>运行原理</h2><p>接到上面的介绍，首先来说<strong>单线程</strong>，我们都知道现在的程序都讲究多线程，同时处理任务，因为cpu执行速度很快，而IO相对来说要慢很多，如果是一个线程跑，其他任务等待，会导致cpu有大量的空闲时间，不仅是资源的浪费，我们的程序执行速度也会变得非常慢。那Node.js为什么还要使用单线程呢，这不是在倒退吗？<br>这里就引出了<strong>异步IO</strong>，Nodejs的单线程是相对而言的，我们可以理解为一个主线程，多个从线程。主线程主要执行代码逻辑，完成程序的运行，而较为缓慢的IO操作则交给从线程完成，这里的操作是异步的，也就是主线程注册了任务继续处理后面的任务，等到注册的这个任务完成后主线程才开始执行，具体结构请看下图：</p>
<p><img src="http://git.cn-hangzhou.oss.aliyun-inc.com/uploads/beidou/beidou/c55b2e27cbf21eb8e61e0cfe068b33c2/QRePV.jpg" alt="Node原理图"> </p>
<p>一个 Node.js 应用启动时，V8 引擎会执行你写的应用代码，保持一份观察者列表（注册在事件上的回调函数）。当事件发生时，它的回调函数会被加进一个事件队列。只要这个队列还有等待执行的回调函数，事件循环就会持续把回调函数从队列中拿出并执行。<br>在回调函数执行过程中，所有的 I/O 请求都会转发给工作线程处理。libuv 维持着一个线程池，包含四个工作线程（默认值，可配置）。文件系统 I/O 请求和 DNS 相关请求都会放进这个线程池处理；其他的请求，如网络、平台特性相关的请求会分发给相应的系统处理单元进行处理。<br>安排给线程池的这些 I/O 操作由 Node.js 的底层库执行，完成之后触发相应事件，对应的事件回调函数会被放入事件队列，等待执行后续操作。这就是一个事件在 Node.js 中执行的整个生命周期。</p>
<h1 id="Node-js跟JavaScript有什么区别"><a href="#Node-js跟JavaScript有什么区别" class="headerlink" title="Node.js跟JavaScript有什么区别"></a>Node.js跟JavaScript有什么区别</h1><p>最后一个问题，其实前面介绍完了，我们已经有了一个了解了，JavaScript是一门语言，而Node.js更像是是一个使用js这门异步IO的语言通过封装大量的后台库完成对高IO请求任务处理的<strong>服务端平台</strong>，一句话概括<strong>Node.js就是运行在服务端的javaScript</strong>。</p>
<h3 id="引用文献"><a href="#引用文献" class="headerlink" title="引用文献"></a>引用文献</h3><p><a href="https://www.cnblogs.com/peiyu1988/p/8032982.html" target="_blank" rel="noopener">Node.js的运行原理-科普篇</a><br><a href="https://www.cnblogs.com/bingooo/p/6720540.html" target="_blank" rel="noopener">Node.js原理解析</a><br><a href="http://blog.csdn.net/xiangzhihong8/article/details/74996757" target="_blank" rel="noopener">Google V8引擎</a></p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/2019-07-21-链表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/22/2019-07-21-链表/" itemprop="url">浅析指针及其应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-22T10:09:27+08:00">
                2019-08-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-22T10:09:27+08:00">
                2019-08-22
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/日常/" itemprop="url" rel="index">
                    <span itemprop="name">日常</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="指针介绍"><a href="#指针介绍" class="headerlink" title="指针介绍"></a>指针介绍</h3><p>一般来说大家入门语言都是c语言，在我们学完如何将”hello world”打印在屏幕，学会了判断和循环语句，学会了一系列基础语法后，突然有一天遇到了个boss，它就是<strong>指针</strong>。</p>
<p>其实理解指针并不难，觉得难是因为我们学着加减乘除，突然让我们求导。不知道这么说有没有引起共鸣，理解指针需要对计算机有个了解开始。</p>
<p>首先，我们先要了解程序运行时的情况。当一个程序在运行时，它的数据都存放在内存中，cpu需要从内存中读取数据进行运算，然后将运算完的结果放回内存，那么如果你是cpu，你怎么知道从哪里取数据呢？我们假设存放数据的内存是一个个小盒子，数据就在这些小盒子里面，如果我们要快速准确的找到我们要的数据，按照现实中的常识我们也能猜到应该对每个小盒子进行编号，之后我们就可以根据对应编号快速找到我们想要的数据了，这个编号在程序的世界里叫做指针。</p>
<p>经过上面的例子，你是不是开始对指针开始有了一些理解，肯定有人说了，你说的这个我都知道，但是为什么char类型的大小是一个字节，而char*类型的指针是4个字节呢，这个就要涉及到<strong>总线</strong>的概念了。我们前面也聊过了，程序运行时需要从内存中取数据，而这个通道就是总线了。这里稍微科普下，总线分为数据总线、控制总线以及地址总线。顾名思义，跟我们指针有关的就是地址总线了，既然是线，就是一根一根的，一般来说总线都是线排，每一根线对应一个bit（0/1），那么上面说的4字节就是对应了32根线了（1个字节是8bit），也就是我们所说的32位。我们有32根线肯定要都用上啊，所以指针就有4个字节来表示。</p>
<p>好了，上面说了这么多，其实总结下就是一句：<strong>指针就是数据存放的地址</strong></p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>既然介绍完了指针，我们当然要聊一下它的应用，这里就说到了数组，有些人可能觉得这跟指针有什么关系，或者另一些人觉得数组不就是指针吗？对，也不对。</p>
<p>首先，先解释下数组跟指针有什么关系，既然我们上面说了指针就是数据，那么数组不就是多个数据的集合吗，既然是数据的集合，当然有自己的地址了，这里要知道的是数组中数据的地址是连续的，这个是个比较重要的地方，是我们可以顺序获取数据的关键。另外说下数组并不是指针，或者准确的说数组名不是指针，可以理解为是数组的首地址，是个常数，这里一定要清楚，他是不可变的，我们可以用a[2]取得数据，也可以用<em>(a+2)取得数据，但一定要知道的是a并不是一个指针，也就是int \</em> a和int a[]的区别，知道这个，数组与指针的关系也就可以分得清楚了。</p>
<h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><p>链表跟数组最大的区别是数组的内存是顺序的，而链表是动态的，我们通过结点中的一个next指针，指向（即存着下个结点的地址）下个结点的形式形成一串类似链表一样的数据结构。</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>理解了链表，其实栈和队列就很好理解了，只是不同形式的链表，先进先出还是先进后出都是表现形式而已，本质都是链表。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/14/submissions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/14/submissions/" itemprop="url">寻找两个有序数组的中位数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-14T00:40:30+08:00">
                2019-08-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-14T00:40:30+08:00">
                2019-08-14
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  624 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>给定两个大小为 m 和 n 的有序数组 nums1 和 nums2。</p>
<p>请你找出这两个有序数组的中位数，并且要求算法的时间复杂度为 O(log(m + n))。</p>
<p>你可以假设 nums1 和 nums2 不会同时为空。</p>
<p>示例1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nums1 = [1, 3]</span><br><span class="line">nums2 = [2]</span><br><span class="line"></span><br><span class="line">则中位数是 2.0</span><br></pre></td></tr></table></figure>

<p>示例2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nums1 = [1, 2]</span><br><span class="line">nums2 = [3, 4]</span><br><span class="line"></span><br><span class="line">则中位数是 (2 + 3)/2 = 2.5</span><br></pre></td></tr></table></figure>

<h3 id="anwser"><a href="#anwser" class="headerlink" title="anwser"></a>anwser</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>* nums1, <span class="keyword">int</span> nums1Size, <span class="keyword">int</span>* nums2, <span class="keyword">int</span> nums2Size)</span></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> ret = <span class="number">0</span>; <span class="comment">// 返回值</span></span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">-1</span>;     <span class="comment">// 已去掉x下标</span></span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">-1</span>;     <span class="comment">// 已去掉y下标</span></span><br><span class="line">    <span class="keyword">int</span> m = nums1Size + nums2Size;     <span class="comment">// 还需要去掉的数</span></span><br><span class="line">    <span class="keyword">int</span> kx = <span class="number">0</span>;     <span class="comment">// x移动后的位置</span></span><br><span class="line">    <span class="keyword">int</span> ky = <span class="number">0</span>;     <span class="comment">// y移动后的位置</span></span><br><span class="line">    <span class="keyword">int</span> km = <span class="number">0</span>;      <span class="comment">// 需要移动的位数</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">19999999</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(m != <span class="number">1</span>) &#123;</span><br><span class="line">        m /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    km = m;</span><br><span class="line">    <span class="keyword">while</span>(km != <span class="number">0</span> &amp;&amp; x != nums1Size<span class="number">-1</span> &amp;&amp; y != nums2Size<span class="number">-1</span>) &#123;</span><br><span class="line">        km = (km == <span class="number">1</span>) ? <span class="number">1</span>:(km/<span class="number">2</span>);</span><br><span class="line">        kx = (x+km)&gt;(nums1Size<span class="number">-1</span>) ? (nums1Size<span class="number">-1</span>):(x+km);</span><br><span class="line">        ky = (y+km)&gt;(nums2Size<span class="number">-1</span>) ? (nums2Size<span class="number">-1</span>):(y+km);</span><br><span class="line">        <span class="keyword">if</span>(nums1[kx] &gt; nums2[ky]) &#123;</span><br><span class="line">            m = m - ky + y;</span><br><span class="line">            km = m;</span><br><span class="line">            y = ky;</span><br><span class="line">            a = nums2[y];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            m = m - kx + x;</span><br><span class="line">            km = m;</span><br><span class="line">            x = kx;</span><br><span class="line">            a = nums1[x];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x != nums1Size<span class="number">-1</span>) &#123;</span><br><span class="line">        kx = (x+<span class="number">1</span>+m)&gt;(nums1Size<span class="number">-1</span>) ? (nums1Size<span class="number">-1</span>):(x+<span class="number">1</span>+m);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(y != nums2Size<span class="number">-1</span>) &#123;</span><br><span class="line">        ky = (y+<span class="number">1</span>+m)&gt;(nums2Size<span class="number">-1</span>) ? (nums2Size<span class="number">-1</span>):(y+<span class="number">1</span>+m);</span><br><span class="line">    &#125;</span><br><span class="line">    b = (nums1Size + nums2Size) % <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(x == nums1Size<span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="comment">//x已经走到头了，只有y了</span></span><br><span class="line">        <span class="keyword">if</span>(b) &#123;</span><br><span class="line">            ret = nums2[ky];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">19999999</span> || m &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                a = nums2[ky<span class="number">-1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            ret = (<span class="keyword">double</span>)(nums2[ky]+a)/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(y == nums2Size<span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(b) &#123;</span><br><span class="line">            ret = nums1[kx];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">19999999</span> || m &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                a = nums1[kx<span class="number">-1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            ret = (<span class="keyword">double</span>)(nums1[kx]+a)/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 两者都有</span></span><br><span class="line">        ret = nums1[kx] &gt; nums2[ky] ? nums2[ky] : nums1[kx];</span><br><span class="line">        <span class="comment">// 为偶数时，取x/y中较大的和kx/ky中较小的相加/2</span></span><br><span class="line">        <span class="keyword">if</span>(b == <span class="number">0</span>)&#123;</span><br><span class="line">           ret = (<span class="keyword">double</span>)(ret+a)/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>没有力气解读了，到现在最难的一个算法了，处理各种边界问题到心态爆炸，而且还是在没有解决所以去参考了解法自己实现的情况下，具体解法采用的是最小k值法，详细算法请参考下列链接，我就不赘述了:<a href="https://leetcode-cn.com/problems/median-of-two-sorted-arrays/solution/xiang-xi-tong-su-de-si-lu-fen-xi-duo-jie-fa-by-w-2/" target="_blank" rel="noopener">median-of-two-sorted-arrays</a></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>即使知道了这么巧妙的解法，实现起来也花了好久好久，错了很多遍，不过自己最终挺了过来，坚持完成了，超过了88%的c语言提交者，虽然是因为算法优秀，但是毕竟是自己实现的，也希望自己后面遇到困难坚持下去，不放弃，总会成功的。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-08-03-longest-substring-without-repeating-characters/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-08-03-longest-substring-without-repeating-characters/" itemprop="url">longest-substring-without-repeating-characters</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T20:01:58+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T20:01:58+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.3k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h3><p>Given a string, find the length of the longest substring without repeating characters.</p>
<p>Example 1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;abcabcbb&quot;</span><br><span class="line">Output: 3 </span><br><span class="line">Explanation: The answer is &quot;abc&quot;, with the length of 3.</span><br></pre></td></tr></table></figure>

<p>Example 2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;bbbbb&quot;</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: The answer is &quot;b&quot;, with the length of 1.</span><br></pre></td></tr></table></figure>

<p>Example 3:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;pwwkew&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The answer is &quot;wke&quot;, with the length of 3. </span><br><span class="line">             Note that the answer must be a substring, &quot;pwke&quot; is a subsequence and not a substring.</span><br></pre></td></tr></table></figure>

<h3 id="my-anwser"><a href="#my-anwser" class="headerlink" title="my anwser"></a>my anwser</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">char</span>&gt; s_str;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            s_str.insert(s[i]);</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt; len - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(s_str.count(s[i+j]) == <span class="number">0</span>) &#123;</span><br><span class="line">                    s_str.insert(s[i+j]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    s_str.clear();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ret &lt; j) &#123;</span><br><span class="line">                ret = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>实打实的暴力破解法，这次没用c语言是因为考虑到查看新增的字符是不是出现在前面，又要再加个循环，跑到O(n^3)，实在是花费太多时间了，那就用set代替，虽然知道这样做在set内部也要用插入删除的操作，但总归是比for看起来舒服很多的，结果也是相当的不理想，不过因为自己这次在优化过程中一直想着是不是能用动态规划而把自己限制死了，私下在研究下动态规划吧🌚。<br>不过，在看了标准答案后真的是豁然开朗，原来是这么做的，其实自己如果一步步优化很多东西完全是可以想到的，以后要注意尽量不要眼高手低，下面先来欣赏标准答案第一个精彩的解法（直接忽略掉暴力解法）：</p>
<p><strong>解法一</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; n) &#123;</span><br><span class="line">            <span class="comment">// try to extend the range [i, j]</span></span><br><span class="line">            <span class="keyword">if</span> (!set.contains(s.charAt(j)))&#123;</span><br><span class="line">                set.add(s.charAt(j++));</span><br><span class="line">                ans = Math.max(ans, j - i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                set.remove(s.charAt(i++));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>精彩的滑动窗口解法，一次遍历字符串，遇到重复的就移动左边届，直到没有重复内容，其实就是在暴力破解的基础上做了一些巧妙的改动，这个代码比较简单，比较好理解，重点放在后面两个优化后的算法上。</p>
<p><strong>解法二</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">// current index of character</span></span><br><span class="line">        <span class="comment">// try to extend the range [i, j]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(s.charAt(j))) &#123;</span><br><span class="line">                i = Math.max(map.get(s.charAt(j)), i);</span><br><span class="line">            &#125;</span><br><span class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</span><br><span class="line">            map.put(s.charAt(j), j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>非常精彩的解法，让我想到了kmp算法，这里的map就相当于next数组，在之前滑动窗口的基础上进行了改进，之前左边界需要逐步移动，这里通过map获取到当前字符对应的value值直接得到下一步左边届的位置，与next数组有异曲同工之妙，下次我也找个时间细细研究下kmp算法，更新一篇关于kmp算法的文章，这里就不多说了，先介绍上面的算法。</p>
<p>从上面聊下来，其实这里最难理解的就是i作为左边届(上面i是当前匹配字符串的左边界，j是右边界)，是怎么快速得到的。</p>
<p>首先，map在这里用的非常巧妙，map对应的值始终是下一跳的位置，我们以<em>abcaa</em>为例，看map中k以及v及i的变化:</p>
<table>
<thead>
<tr>
<th>j</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>k</td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>a</td>
<td>a</td>
</tr>
<tr>
<td>v</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>i</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>4</td>
</tr>
</tbody></table>
<p>从表中可以看出，当遇到相同的k时，递增的v就会改变对应的值为下次下标所在的位置，i此时获得的时之前value的值，也就是对应的左边届的位置是根据上次字符出现时的next位置决定的，因为在这之间的字符我们已经可以判断没有在轮询的必要了（每次都跳到上次出现的后一个位置）。</p>
<p>下面是针对上面这种解法的又一次优化：</p>
<p><strong>解法三</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] index = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">128</span>]; <span class="comment">// current index of character</span></span><br><span class="line">        <span class="comment">// try to extend the range [i, j]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            i = Math.max(index[s.charAt(j)], i);</span><br><span class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</span><br><span class="line">            index[s.charAt(j)] = j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这里针对ascii码是有限的（而且边界比较小），用数组替换了map，完成了这个精彩的算法，上面我们说的挺多的了，这里就不重复说了。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这次完全是自己眼高手低了，算法应该先用自己能想到的方法实现，然后针对该算饭进行一步步优化，而不是刚开始就想着一口吃个胖子，有个多优秀的算法解决。同时，动态规划也要好好学习，首先，最起码应该知道什么情况下使用动态规划。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-07-21-two_num/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-07-21-two_num/" itemprop="url">TWO NUM</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T20:01:38+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T20:01:38+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  635 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h3><p>Given an array of integers, return indices of the two numbers such that they add up to a specific target.</p>
<p>You may assume that each input would have exactly one solution, and you may not use the same element twice.</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [2, 7, 11, 15], target = 9,</span><br><span class="line">Because nums[0] + nums[1] = 2 + 7 = 9,</span><br><span class="line">return [0, 1].</span><br></pre></td></tr></table></figure>

<h3 id="anwser"><a href="#anwser" class="headerlink" title="anwser"></a>anwser</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">twoSum</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize, <span class="keyword">int</span> target, <span class="keyword">int</span>* returnSize)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *ret = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">int</span> row = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> col = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> add = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    ret = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*<span class="number">2</span>);</span><br><span class="line">    ret[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    ret[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(;row &lt; numsSize<span class="number">-1</span>; row++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(col = row+<span class="number">1</span>; col &lt; numsSize; col++)</span><br><span class="line">        &#123;</span><br><span class="line">            add = nums[row] + nums[col];</span><br><span class="line">            <span class="keyword">if</span>(add == target)</span><br><span class="line">            &#123;</span><br><span class="line">                ret[<span class="number">0</span>] = row;</span><br><span class="line">                ret[<span class="number">1</span>] = col;</span><br><span class="line">                *returnSize = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>显而易见，最low的解法，因为是刚开始做，尝试进行优化无果后去查看官方的解法，恍然大悟，原来可以用hashmap等容器进行辅助，将时间复杂度由O(n^2)降低到O(n)，先来看代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        map.put(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> complement = target - nums[i];</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(complement) &amp;&amp; map.get(complement) != i) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; i, map.get(complement) &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码是用java写的，主要是通过遍历一遍数组，得到一个map，然后从里面找到target与num[i]的差值，这里简单的应用了hashmap就完成了复杂的操作，也是我们需要灵活运用数据结构的例子。</p>
<p>这里虽然上面已经做到很快，但是在进行之前还是需要先轮训一遍数组，我们是不是可以省去这一步呢，这时候有了第三种方法，同样的，我们先来看代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> complement = target - nums[i];</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(complement)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; map.get(complement), i &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"No two sum solution"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过上述代码我们可以看到巧妙的地方，只是走了一遍轮训，在这个过程中找到hashmap中是否由差值，如果没有就存进去</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这道题很简单，但是让我看到了hashmap在某些算法场景下能带来的巨大改进，同时也看到了巧妙的运用代码可以更高效的完成我们的操作，以后写算法看来不能全都用c语言了，毕竟容器的实现并不是我们刷题的重点。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-07-21-pssh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-07-21-pssh/" itemprop="url">pssh/pscp</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T20:01:19+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T20:01:19+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/小技巧/" itemprop="url" rel="index">
                    <span itemprop="name">小技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  571 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>学习到这个批量处理工具是在工作中有一次写了个对现网环境中脏链接/进程/文件等脏数据进行检测分析的脚本，但是需要将这个脚本放到对应宿主机中，于是了解到了这两个批量处理的脚本，下面我们来介绍下脚本的使用。</p>
<h3 id="pscp"><a href="#pscp" class="headerlink" title="pscp"></a>pscp</h3><p>scp是我们经常会用到的命令，是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，如下为说明文档：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Usage: pscp [OPTIONS] local remote</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --version             show program&apos;s version number and exit</span><br><span class="line">  --help                show this help message and exit</span><br><span class="line">  -h HOST_FILE, --hosts=HOST_FILE</span><br><span class="line">                        hosts file (each line &quot;[user@]host[:port]&quot;)</span><br><span class="line">  -H HOST_STRING, --host=HOST_STRING</span><br><span class="line">                        additional host entries (&quot;[user@]host[:port]&quot;)</span><br><span class="line">  -l USER, --user=USER  username (OPTIONAL)</span><br><span class="line">  -p PAR, --par=PAR     max number of parallel threads (OPTIONAL)</span><br><span class="line">  -o OUTDIR, --outdir=OUTDIR</span><br><span class="line">                        output directory for stdout files (OPTIONAL)</span><br><span class="line">  -e ERRDIR, --errdir=ERRDIR</span><br><span class="line">                        output directory for stderr files (OPTIONAL)</span><br><span class="line">  -t TIMEOUT, --timeout=TIMEOUT</span><br><span class="line">                        timeout (secs) (0 = no timeout) per host (OPTIONAL)</span><br><span class="line">  -O OPTION, --option=OPTION</span><br><span class="line">                        SSH option (OPTIONAL)</span><br><span class="line">  -v, --verbose         turn on warning and diagnostic messages (OPTIONAL)</span><br><span class="line">  -A, --askpass         Ask for a password (OPTIONAL)</span><br><span class="line">  -x ARGS, --extra-args=ARGS</span><br><span class="line">                        Extra command-line arguments, with processing for</span><br><span class="line">                        spaces, quotes, and backslashes</span><br><span class="line">  -X ARG, --extra-arg=ARG</span><br><span class="line">                        Extra command-line argument</span><br><span class="line">  -r, --recursive       recusively copy directories (OPTIONAL)</span><br><span class="line"></span><br><span class="line">Example: pscp -h hosts.txt -l irb2 foo.txt /home/irb2/foo.txt</span><br></pre></td></tr></table></figure>

<p>当我们需要批量传输文件时可以使用如下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pscp -h $ip_file -lroot $file $dest_path</span><br></pre></td></tr></table></figure>

<p>这里的ipfile的文件中可以放置我们的ips</p>
<h3 id="pssh"><a href="#pssh" class="headerlink" title="pssh"></a>pssh</h3><p>同pscp一样，pssh为ssh的批处理版，说明文档如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Usage: pssh [OPTIONS] command [...]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --version             show program&apos;s version number and exit</span><br><span class="line">  --help                show this help message and exit</span><br><span class="line">  -h HOST_FILE, --hosts=HOST_FILE</span><br><span class="line">                        hosts file (each line &quot;[user@]host[:port]&quot;)</span><br><span class="line">  -H HOST_STRING, --host=HOST_STRING</span><br><span class="line">                        additional host entries (&quot;[user@]host[:port]&quot;)</span><br><span class="line">  -l USER, --user=USER  username (OPTIONAL)</span><br><span class="line">  -p PAR, --par=PAR     max number of parallel threads (OPTIONAL)</span><br><span class="line">  -o OUTDIR, --outdir=OUTDIR</span><br><span class="line">                        output directory for stdout files (OPTIONAL)</span><br><span class="line">  -e ERRDIR, --errdir=ERRDIR</span><br><span class="line">                        output directory for stderr files (OPTIONAL)</span><br><span class="line">  -t TIMEOUT, --timeout=TIMEOUT</span><br><span class="line">                        timeout (secs) (0 = no timeout) per host (OPTIONAL)</span><br><span class="line">  -O OPTION, --option=OPTION</span><br><span class="line">                        SSH option (OPTIONAL)</span><br><span class="line">  -v, --verbose         turn on warning and diagnostic messages (OPTIONAL)</span><br><span class="line">  -A, --askpass         Ask for a password (OPTIONAL)</span><br><span class="line">  -x ARGS, --extra-args=ARGS</span><br><span class="line">                        Extra command-line arguments, with processing for</span><br><span class="line">                        spaces, quotes, and backslashes</span><br><span class="line">  -X ARG, --extra-arg=ARG</span><br><span class="line">                        Extra command-line argument</span><br><span class="line">  -i, --inline          inline aggregated output and error for each server</span><br><span class="line">  --inline-stdout       inline standard output for each server</span><br><span class="line">  -I, --send-input      read from standard input and send as input to ssh</span><br><span class="line">  -P, --print           print output as we get it</span><br><span class="line"></span><br><span class="line">Example: pssh -h hosts.txt -l irb2 -o /tmp/foo uptime</span><br></pre></td></tr></table></figure>

<p>这里我们更常用来对集群进行批处理，执行命令或者文件</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-07-28-pstree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-07-28-pstree/" itemprop="url">pstree/pstack/strace</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T20:01:10+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T20:01:10+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/小技巧/" itemprop="url" rel="index">
                    <span itemprop="name">小技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>今天介绍的几个命令主要是追踪进程执行状态用的，在平时工作中经常遇到进程卡住的情况，导致后续任务失败，如果当前现场得以保留，我们可以用这三个命令来完成对问题根因的查找以及处理。</p>
<h3 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h3><p>pstree命令主要以树状图的形式展现进程间的调用关系，通过ps获取到进程的进程id后传入pstree进行进程查看，官方介绍如下：</p>
<blockquote>
<p>pstree shows running processes as a tree. The tree is rooted at either pid or init if pid is omitted.<br>If a user name is specified, all process trees rooted at processes  owned  by that user are shown.</p>
</blockquote>
<p>以下为各选项的说明文档：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pstree: invalid option -- &apos;-&apos;</span><br><span class="line">Usage: pstree [ -a ] [ -c ] [ -h | -H PID ] [ -l ] [ -n ] [ -p ] [ -u ]</span><br><span class="line">              [ -A | -G | -U ] [ PID | USER ]</span><br><span class="line">       pstree -V</span><br><span class="line">Display a tree of processes.</span><br><span class="line"></span><br><span class="line">    -a     show command line arguments</span><br><span class="line">    -A     use ASCII line drawing characters</span><br><span class="line">    -c     don&apos;t compact identical subtrees</span><br><span class="line">    -h     highlight current process and its ancestors</span><br><span class="line">    -H PID highlight this process and its ancestors</span><br><span class="line">    -G     use VT100 line drawing characters</span><br><span class="line">    -l     don&apos;t truncate long lines</span><br><span class="line">    -n     sort output by PID</span><br><span class="line">    -p     show PIDs; implies -c</span><br><span class="line">    -u     show uid transitions</span><br><span class="line">    -U     use UTF-8 (Unicode) line drawing characters</span><br><span class="line">    -V     display version information</span><br><span class="line">    -Z     show SELinux security contexts</span><br><span class="line">    PID    start at this PID; default is 1 (init)</span><br><span class="line">    USER   show only trees rooted at processes of this user</span><br></pre></td></tr></table></figure>

<h3 id="pstack"><a href="#pstack" class="headerlink" title="pstack"></a>pstack</h3><p>pstack跟pstree不太一样，pstree主要看进程间的调用关系，pstack主要是查看进程函数堆栈，核心实现是使用了gdb以及threadapply all bt 命令</p>
<p>一般用法为直接加pid，如下</p>
<blockquote>
<p>pstack <pid></pid></p>
</blockquote>
<p>命令结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">pstack 4551</span><br><span class="line">Thread 7 (Thread 1084229984 (LWP 4552)):</span><br><span class="line">#0  0x000000302afc63dc in epoll_wait () from /lib64/tls/libc.so.6</span><br><span class="line">#1  0x00000000006f0730 in ub::EPollEx::poll ()</span><br><span class="line">#2  0x00000000006f172a in ub::NetReactor::callback ()</span><br><span class="line">#3  0x00000000006fbbbb in ub::UBTask::CALLBACK ()</span><br><span class="line">#4  0x000000302b80610a in start_thread () from /lib64/tls/libpthread.so.0</span><br><span class="line">#5  0x000000302afc6003 in clone () from /lib64/tls/libc.so.6</span><br><span class="line">#6  0x0000000000000000 in ?? ()</span><br><span class="line">Thread 6 (Thread 1094719840 (LWP 4553)):</span><br><span class="line">#0  0x000000302afc63dc in epoll_wait () from /lib64/tls/libc.so.6</span><br><span class="line">#1  0x00000000006f0730 in ub::EPollEx::poll ()</span><br><span class="line">#2  0x00000000006f172a in ub::NetReactor::callback ()</span><br><span class="line">#3  0x00000000006fbbbb in ub::UBTask::CALLBACK ()</span><br><span class="line">#4  0x000000302b80610a in start_thread () from /lib64/tls/libpthread.so.0</span><br><span class="line">#5  0x000000302afc6003 in clone () from /lib64/tls/libc.so.6</span><br><span class="line">#6  0x0000000000000000 in ?? ()</span><br><span class="line">Thread 5 (Thread 1105209696 (LWP 4554)):</span><br><span class="line">#0  0x000000302b80baa5 in __nanosleep_nocancel ()</span><br><span class="line">#1  0x000000000079e758 in comcm::ms_sleep ()</span><br><span class="line">#2  0x00000000006c8581 in ub::UbClientManager::healthyCheck ()</span><br><span class="line">#3  0x00000000006c8471 in ub::UbClientManager::start_healthy_check ()</span><br><span class="line">#4  0x000000302b80610a in start_thread () from /lib64/tls/libpthread.so.0</span><br><span class="line">#5  0x000000302afc6003 in clone () from /lib64/tls/libc.so.6</span><br><span class="line">#6  0x0000000000000000 in ?? ()</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h3 id="strace"><a href="#strace" class="headerlink" title="strace"></a>strace</h3><p>strace常用来跟踪进程执行时的系统调用和所接收的信号。 在Linux世界，进程不能直接访问硬件设备，当进程需要访问硬件设备(比如读取磁盘文件，接收网络数据等等)时，必须由用户态模式切换至内核态模式，通 过系统调用访问硬件设备。strace可以跟踪到一个进程产生的系统调用,包括参数，返回值，执行消耗的时间</p>
<p>如下为strace的参数定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">strace: invalid option -- &apos;-&apos;</span><br><span class="line">usage: strace [-dDffhiqrtttTvVxx] [-a column] [-e expr] ... [-o file]</span><br><span class="line">              [-p pid] ... [-s strsize] [-u username] [-E var=val] ...</span><br><span class="line">              [command [arg ...]]</span><br><span class="line">   or: strace -c [-D] [-e expr] ... [-O overhead] [-S sortby] [-E var=val] ...</span><br><span class="line">              [command [arg ...]]</span><br><span class="line">-c -- count time, calls, and errors for each syscall and report summary</span><br><span class="line">-f -- follow forks, -ff -- with output into separate files</span><br><span class="line">-F -- attempt to follow vforks, -h -- print help message</span><br><span class="line">-i -- print instruction pointer at time of syscall</span><br><span class="line">-q -- suppress messages about attaching, detaching, etc.</span><br><span class="line">-r -- print relative timestamp, -t -- absolute timestamp, -tt -- with usecs</span><br><span class="line">-T -- print time spent in each syscall, -V -- print version</span><br><span class="line">-v -- verbose mode: print unabbreviated argv, stat, termio[s], etc. args</span><br><span class="line">-x -- print non-ascii strings in hex, -xx -- print all strings in hex</span><br><span class="line">-a column -- alignment COLUMN for printing syscall results (default 40)</span><br><span class="line">-e expr -- a qualifying expression: option=[!]all or option=[!]val1[,val2]...</span><br><span class="line">   options: trace, abbrev, verbose, raw, signal, read, or write</span><br><span class="line">-o file -- send trace output to FILE instead of stderr</span><br><span class="line">-O overhead -- set overhead for tracing syscalls to OVERHEAD usecs</span><br><span class="line">-p pid -- trace process with process id PID, may be repeated</span><br><span class="line">-D -- run tracer process as a detached grandchild, not as parent</span><br><span class="line">-s strsize -- limit length of print strings to STRSIZE chars (default 32)</span><br><span class="line">-S sortby -- sort syscall counts by: time, calls, name, nothing (default time)</span><br><span class="line">-u username -- run command as username handling setuid and/or setgid</span><br><span class="line">-E var=val -- put var=val in the environment for command</span><br><span class="line">-E var -- remove var from the environment for command</span><br></pre></td></tr></table></figure>

<p>已经有很多文章对这个进行了详细的介绍，这里就不重复造轮子了，具体了解可以看如下链接：</p>
<blockquote>
<p><a href="https://man.linuxde.net/strace" target="_blank" rel="noopener">https://man.linuxde.net/strace</a></p>
</blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>今天了解到的命令都是进程追踪的命令，当我们遇到进程出现问题需要追踪调试的时候可以使用。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-08-04-getops/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-08-04-getops/" itemprop="url">getopts</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T20:01:03+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T20:01:03+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/小技巧/" itemprop="url" rel="index">
                    <span itemprop="name">小技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  531 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>平时使用命令的时候，我们经常会使用–help查看选项列表进行使用，那么在命令内部是怎么获取到我们的选项以及参数使用的呢？</p>
<p>今天就来介绍下这个命令<figure class="highlight plain"><figcaption><span>,在shell脚本中可以读取到命令行输入的选项及参数。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 用法</span><br><span class="line"></span><br><span class="line">首先我们先来看个简单的小例子</span><br><span class="line"></span><br><span class="line">```sh</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; sh getopts.sh -a hello</span><br><span class="line">getopts test</span><br><span class="line">the -a option is: hello</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; cat getopts.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">echo &quot;getopts test&quot;</span><br><span class="line">while getopts a: option</span><br><span class="line">do</span><br><span class="line">    case $option</span><br><span class="line">    in</span><br><span class="line">        a)</span><br><span class="line">            echo &quot;the -a option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        \?)</span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>从上面我们可以看到，通过使用getopts，我们可以读取到-a以及其参数。一切都很顺利，那么第一个疑问点来了，getopts后面的option_string是<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">```sh</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; sh getopts.sh -a hello</span><br><span class="line">getopts test</span><br><span class="line">the -a option is:</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; cat getopts.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">echo &quot;getopts test&quot;</span><br><span class="line">while getopts a option</span><br><span class="line">do</span><br><span class="line">    case $option</span><br><span class="line">    in</span><br><span class="line">        a)</span><br><span class="line">            echo &quot;the -a option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        \?)</span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>去掉<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">那另外一点，如果有```:```的情况下，不传入参数，会发生什么，这里同样看例子：</span><br><span class="line">```sh</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; sh getopts.sh -a</span><br><span class="line">getopts test</span><br><span class="line">getopts.sh: option requires an argument -- a</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; cat getopts.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">echo &quot;getopts test&quot;</span><br><span class="line">while getopts a: option</span><br><span class="line">do</span><br><span class="line">    case $option</span><br><span class="line">    in</span><br><span class="line">        a)</span><br><span class="line">            echo &quot;the -a option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        \?)</span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>很明显的报错了，不过需求是多样的，可能有些时候我们确实不用传参数，这时候我们就可以在<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">```sh</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; sh getopts.sh -a hello -b hey -c world -d</span><br><span class="line">getopts test</span><br><span class="line">the -a option is: hello</span><br><span class="line">the -b option is: hey</span><br><span class="line">the -c option is: world</span><br><span class="line">the -d option is:</span><br><span class="line">➜ /Users/ramon.zhang/project/shell/test &gt; cat getopts.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">echo &quot;getopts test&quot;</span><br><span class="line"></span><br><span class="line">while getopts :a::b:c:d option</span><br><span class="line">do</span><br><span class="line">    case $option</span><br><span class="line">    in</span><br><span class="line">        a)</span><br><span class="line">            echo &quot;the -a option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        b)</span><br><span class="line">            echo &quot;the -b option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        c)</span><br><span class="line">            echo &quot;the -c option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        d)</span><br><span class="line">            echo &quot;the -d option is: $OPTARG&quot;</span><br><span class="line">            ;;</span><br><span class="line">        \?)</span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p>上面就是getopts的基础用法了，还有一个相似的但是比较老的命令getopt，他支持长选项，有兴趣的可以去了解，这里就不介绍了。</p>
<h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://blog.csdn.net/xluren/article/details/17489667" target="_blank" rel="noopener">shell getopts用法</a></p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-07-25-Add_two_num/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-07-25-Add_two_num/" itemprop="url">ADD TWO NUM</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T19:58:05+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T19:58:05+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  767 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Title"><a href="#Title" class="headerlink" title="Title"></a>Title</h3><p>You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p>
<p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)</span><br><span class="line">Output: 7 -&gt; 0 -&gt; 8</span><br><span class="line">Explanation: 342 + 465 = 807.</span><br></pre></td></tr></table></figure>

<h3 id="anwser"><a href="#anwser" class="headerlink" title="anwser"></a>anwser</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">struct ListNode* <span class="title">addTwoNumbers</span><span class="params">(struct ListNode* l1, struct ListNode* l2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> up = <span class="number">0</span>;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">list1</span> = <span class="title">l1</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">list2</span> = <span class="title">l2</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">tmp</span> = <span class="title">NULL</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">ret</span> = <span class="title">NULL</span>;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!(list1 == <span class="literal">NULL</span> &amp;&amp; list2 == <span class="literal">NULL</span> &amp;&amp; up == <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span>(tmp != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            tmp-&gt;next = (struct ListNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct ListNode));</span><br><span class="line">            tmp = tmp-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            tmp = (struct ListNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct ListNode));</span><br><span class="line">            ret = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        tmp-&gt;val = up;</span><br><span class="line">        tmp-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">if</span> (list1 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            tmp-&gt;val += list1-&gt;val;</span><br><span class="line">            list1 = list1-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (list2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            tmp-&gt;val += list2-&gt;val;</span><br><span class="line">            list2 = list2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tmp-&gt;val &gt; <span class="number">9</span>) &#123;</span><br><span class="line">            tmp-&gt;val = tmp-&gt;val%<span class="number">10</span>;</span><br><span class="line">            up = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            up = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这次的解题要比上次好了很多，不过前期也错误了几次，因为错误代码没有保留（大家应该也没兴趣）这里就不展示了，下面是这次提交后的成果:</p>
<blockquote>
<p>Runtime: 12 ms, faster than 87.29% of C online submissions for Add Two Numbers.<br>Memory Usage: 8.8 MB, less than 89.63% of C online submissions for Add Two Numbers.</p>
</blockquote>
<p>哈哈，小小的开心下，来说下思路，本来一开始想着去直接返回l1或者l2，不增添新的空间，但是发现这样做迈不过要检查这两个链表长度的坎，如果要查长度，每个链表轮训一次的话，花费的时间就太长了，于是new了一个新的tmp链表，考虑到要返回这个链表，所以需要把头指针保存下来，所以就在循环的一开始有个判断，找到第一次，既解决了malloc返回对象第一次能正确送达到tmp链表的问题，也解决了ret获取到头节点指针的麻烦。</p>
<p>另外一个麻烦的地方是进位，如果最后一位有进位按照一般逻辑来说要拿出来判断，然后malloc，既然前面省了这么多，怎么能在这一步失败，所以苦思冥想，通过修改循环内部结构和while的条件解决了多一个进位的情况，同时整理代码看起来也简洁了很多。</p>
<p>最后放出标准答案:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    ListNode dummyHead = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    ListNode p = l1, q = l2, curr = dummyHead;</span><br><span class="line">    <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="keyword">null</span> || q != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = (p != <span class="keyword">null</span>) ? p.val : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> y = (q != <span class="keyword">null</span>) ? q.val : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = carry + x + y;</span><br><span class="line">        carry = sum / <span class="number">10</span>;</span><br><span class="line">        curr.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">        curr = curr.next;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="keyword">null</span>) p = p.next;</span><br><span class="line">        <span class="keyword">if</span> (q != <span class="keyword">null</span>) q = q.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        curr.next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummyHead.next;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这道题也是一道简单的算法题，但是有了上一道题的经验，这里对他进行了多次优化，用尽量少的代码和尽量省时间的方式来完成算法，通过结果也是对自己算法之路的一点鼓励了。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019-07-28-coc_vim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ramon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ramon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/2019-07-28-coc_vim/" itemprop="url">coc.nvim介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T12:03:34+08:00">
                2019-08-09
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-08-09T12:03:34+08:00">
                2019-08-09
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/日常/" itemprop="url" rel="index">
                    <span itemprop="name">日常</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.4k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p><strong>官方介绍：</strong> oc.nvim 为您提供全方位的 LSP 特性支持，包含智能补全、错误提示、参数提示等功能，关于 LSP 的详细特性请查看<a href="https://microsoft.github.io/language-server-protocol" target="_blank" rel="noopener">官方文档</a>。<br><br><br><strong>我的理解：</strong> coc.nvim是一个基于nodejs开发的插件平台，利用了node异步的特性快速实现各种辅助功能，相比YCM的体积大，需要编译，且巨多安装过程中的坑来说，coc可配置性高、速度快、体积小，用起来非常舒服。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>推荐使用 <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">https://github.com/junegunn/vim-plug</a> 添加</p>
<blockquote>
<p>Plug ‘neoclide/coc.nvim’, {‘branch’: ‘release’}</p>
</blockquote>
<p>到 <code>init.vim</code> 然后执行: </p>
<blockquote>
<p>:PlugInstall</p>
</blockquote>
<p>如果使用其它插件进行配置，请使用 release 分支代码。</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>可通过 <code>coc-settings.json</code> 文件进行配置，该文件为 jconc 格式，就是添加了注释格式支持的 json。</p>
<p>使用命令 |:CocConfig| 打开用户配置文件，或者在项目根目录下创建<code>.vim/coc-settings.json</code> 文件，后者优先级更高。<br>执行命令 <code>:CocInstall coc-json</code> 安装 json 语言支持，该插件可提供配置补全和验证等功能。</p>
<p>下列为我的配置文件，仅供参考:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;suggest.snippetIndicator&quot;: &quot;&quot;,</span><br><span class="line">	&quot;suggest.enablePreview&quot;:true,</span><br><span class="line">    &quot;initializationOptions&quot;: &#123;</span><br><span class="line">        &quot;cache&quot;: &#123;</span><br><span class="line">            &quot;directory&quot;: &quot;/tmp/ccls&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;clang&quot;: &#123;</span><br><span class="line">            &quot;resourceDir&quot;: &quot;/Library/Developer/CommandLineTools/usr/lib/clang/10.0.1&quot;,</span><br><span class="line">            &quot;extraArgs&quot;: [</span><br><span class="line">                &quot;-isystem&quot;,</span><br><span class="line">                &quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/V1&quot;,</span><br><span class="line">                &quot;-I&quot;,</span><br><span class="line">                &quot;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;tsserver.enableJavascript&quot;: true,</span><br><span class="line">    &quot;languageserver&quot;: &#123;</span><br><span class="line">        &quot;efm&quot;: &#123;</span><br><span class="line">            &quot;command&quot;: &quot;efm-langserver&quot;,</span><br><span class="line">            &quot;args&quot;: [],</span><br><span class="line">            &quot;filetypes&quot;: [&quot;vim&quot;, &quot;eruby&quot;, &quot;markdown&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;flow&quot;: &#123;</span><br><span class="line">            &quot;command&quot;: &quot;flow&quot;,</span><br><span class="line">            &quot;args&quot;: [&quot;lsp&quot;],</span><br><span class="line">            &quot;filetypes&quot;: [&quot;javascript&quot;, &quot;javascriptreact&quot;],</span><br><span class="line">            &quot;initializationOptions&quot;: &#123;&#125;,</span><br><span class="line">            &quot;requireRootPattern&quot;: true,</span><br><span class="line">            &quot;settings&quot;: &#123;&#125;,</span><br><span class="line">            &quot;rootPatterns&quot;: [&quot;.flowconfig&quot;]</span><br><span class="line">        &#125;, </span><br><span class="line">        &quot;golang&quot;: &#123;</span><br><span class="line">            &quot;command&quot;: &quot;gopls&quot;,</span><br><span class="line">            &quot;args&quot;: [],</span><br><span class="line">            &quot;rootPatterns&quot;: [&quot;go.mod&quot;, &quot;.vim/&quot;, &quot;.git/&quot;, &quot;.hg/&quot;],</span><br><span class="line">            &quot;filetypes&quot;: [&quot;go&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;clangd&quot;: &#123;</span><br><span class="line">            &quot;command&quot;: &quot;clangd&quot;,</span><br><span class="line">            &quot;args&quot;: [&quot;--background-index&quot;],</span><br><span class="line">            &quot;rootPatterns&quot;: [&quot;compile_flags.txt&quot;, &quot;compile_commands.json&quot;, &quot;.vim/&quot;, &quot;.git/&quot;, &quot;.hg/&quot;],</span><br><span class="line">            &quot;filetypes&quot;: [&quot;c&quot;, &quot;cc&quot;, &quot;cpp&quot;, &quot;objc&quot;, &quot;objcpp&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;foo&quot;: &#123;</span><br><span class="line">            &quot;module&quot;: &quot;/usr/local/lib/node_modules/foo/index.js&quot;,</span><br><span class="line">            &quot;args&quot;: [&quot;--node-ipc&quot;],</span><br><span class="line">            &quot;filetypes&quot;: [&quot;foo&quot;],</span><br><span class="line">            &quot;trace.server&quot;: &quot;verbose&quot;,</span><br><span class="line">            &quot;rootPatterns&quot;: [&quot;root.yml&quot;],</span><br><span class="line">            &quot;execArgv&quot;: [&quot;--nolazy&quot;, &quot;--inspect-brk=6045&quot;],</span><br><span class="line">            &quot;initializationOptions&quot;: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;validate&quot;: true</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;python&quot;: &#123;</span><br><span class="line">            &quot;command&quot;: &quot;python&quot;,</span><br><span class="line">            &quot;args&quot;: [</span><br><span class="line">                &quot;-mpyls&quot;,</span><br><span class="line">                &quot;-vv&quot;,</span><br><span class="line">                &quot;--log-file&quot;,</span><br><span class="line">                &quot;/tmp/lsp_python.log&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;trace.server&quot;: &quot;verbose&quot;,</span><br><span class="line">            &quot;filetypes&quot;: [</span><br><span class="line">                &quot;python&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;pyls&quot;: &#123;</span><br><span class="line">                    &quot;enable&quot;: true,</span><br><span class="line">                    &quot;trace&quot;: &#123;</span><br><span class="line">                        &quot;server&quot;: &quot;verbose&quot;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &quot;commandPath&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;configurationSources&quot;: [</span><br><span class="line">                        &quot;pycodestyle&quot;</span><br><span class="line">                    ],</span><br><span class="line">                    &quot;plugins&quot;: &#123;</span><br><span class="line">                        &quot;jedi_completion&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;jedi_hover&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;jedi_references&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;jedi_signature_help&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;jedi_symbols&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true,</span><br><span class="line">                            &quot;all_scopes&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;mccabe&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true,</span><br><span class="line">                            &quot;threshold&quot;: 15</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;preload&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;pycodestyle&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;pydocstyle&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: false,</span><br><span class="line">                            &quot;match&quot;: &quot;(?!test_).*\\.py&quot;,</span><br><span class="line">                            &quot;matchDir&quot;: &quot;[^\\.].*&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;pyflakes&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;rope_completion&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &quot;yapf&quot;: &#123;</span><br><span class="line">                            &quot;enabled&quot;: true</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="补全功能"><a href="#补全功能" class="headerlink" title="补全功能"></a>补全功能</h3><p>因为我现在只用到了智能补全的功能，下面就先来介绍一下 coc 里面的补全功能。</p>
<p>这里摘抄整理自开发者的介绍，原文链接<a href="https://www.v2ex.com/t/469214" target="_blank" rel="noopener">coc.nvim介绍</a><br><br></p>
<ul>
<li>多种触发方式，同时支持手工触发。默认使用 always 自动模式表示输入单词首字母以及 trigger character 时触发补全，可配置为 trigger 模式，表示仅在输入 trigger character 时触发，或者配置为 none，表示禁用自动触发。任何触发模式下都可使用绑定的快捷键进行手工触发。<br>模糊匹配，智能大小写。同 YCM 等知名插件。</li>
<li>多 source 异步并发获取。同时异步获取不同 source 结果，效率更高。<br>支持用户自定义 source。可通过编写 viml 插件实现自定义 source， 自定义补全 source 文档<br>Source 管理功能。 使用命令 :Denite source 查看当前 buffer 使用 source 列表，默认回车操作切换 source 可用状态。</li>
<li>支持通过删除字符纠正错误输入。 为了提高过滤的效率，除非清空当前过滤字符，否则删除过多的字符不会导致补全停止，而是触发一次针对已有补全缓存的重新过滤。</li>
<li>尊重用户 completeopt 配置。 coc 会在补全开始后将 completeopt 设置为 menuone,noselect,noinsert 补全完成后重置初始设置，原因是使用 vim 自带的补全时，很多用户更青睐使用 menu,preview 来做为 completeopt （因为 vim 本身的补全过滤并不支持模糊匹配）。</li>
<li>支持 language server 返回的 triggerCharacters 作为触发字符。</li>
<li>支持 completion resolve 请求。用户选中 complete item 后向 server 请求详细数据，通常用做请求文档以及 textEdit 等字段。</li>
<li>支持 LSP 补全项中的 sortText，filterText 以及 insertText 字段</li>
<li>支持 LSP 补全项完成后续操作，包含 textEdit，additinalTextEdit 以及 command。</li>
<li>支持 snippet 类型补全。coc 实现了 LSP 中定义的 snippet （包含 choice 功能），无需额外安装插件，且在确认补全时自动触发。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>coc.nvim的生态很快的建立起来，使用感受也很不错，而且可定制性很强，vim用户的福音，如果你正在苦于YCM的安装编译问题处理，可以试试这款插件，另外其他支持都可以在github上面找到。</p>

          
        
      
    </div>
    
    
    

    

    

    
    <div>
        
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Ramon</p>
              <p class="site-description motion-element" itemprop="description">当你觉得晚的时候，恰恰是最早的时候</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ramon</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> 访问人数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> 总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  








  












  





  

  

  

  
  

  

  

  

</body>
</html>
